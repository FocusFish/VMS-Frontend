<div class="content-container {{ columnHidden ? 'panel-hidden' : ''}}">
  <div id="minimize-left-column" (click)="hideLeftColumn(!columnHidden)">
    <i class="ri-arrow-right-s-line" aria-hidden="true" *ngIf="columnHidden"></i>
    <i class="ri-arrow-left-s-line" aria-hidden="true" *ngIf="!columnHidden"></i>
  </div>
  <ul id="realtime-left-column-menu">
    <li
      (click)="setActivePanelAndShowColumn(['filters'])"
    ><i class="icon-search {{activePanel[0] === 'filters' ? 'active' : '' }}" aria-hidden="true"></i></li>
    <li
      *ngIf="!noWorkflow"
      (click)="setActivePanelAndShowColumn(['workflows'])"
    ><i class="icon-workflow {{activePanel[0] === 'workflows' ? 'active' : '' }}" aria-hidden="true"></i></li>
  </ul>
  <div class="panel filter-panel" *ngIf="activePanel[0] === 'filters'">
    <h3 i18n>Filter map</h3>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Quick filter"
      [active]="filtersActive.filter"
      [setActiveFunction]="setGivenFilterActiveCurry('filter')"
    >
      <map-asset-filter
        body
        [filterFunction]="filterAssets"
        [filterQuerySaved]="currentFilterQuery$ | async"
      ></map-asset-filter>
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Saved filters"
      [active]="filtersActive.savedFilters"
      [setActiveFunction]="setGivenFilterActiveCurry('savedFilters')"
    >
      <map-saved-filters
        body
        [filterQuery]="currentFilterQuery$ | async"
        [saveFilterFunction]="saveFilter"
        [savedFilters]="savedFilters$ | async"
        [activeFilters]="activeFilters$ | async"
        [activateFilter]="activateSavedFilter"
        [deactivateFilter]="deactivateSavedFilter"
        [deleteFilter]="deleteFilter"
      ></map-saved-filters>
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Asset groups"
      [active]="filtersActive.assetGroups"
      [setActiveFunction]="setGivenFilterActiveCurry('assetGroups')"
    >
      <map-asset-groups
        body
        [assetGroups]="assetGroupFilters"
        [assetEssentials]="assetEssentialsForAssetGroups"
        [selectedAssetGroups]="activeFilters$ | async"
        [setAssetGroup]="activateSavedFilter"
        [clearAssetGroup]="deactivateSavedFilter"
        [deleteFilter]="deleteFilter"
        [saveFilter]="saveFilter"
      ></map-asset-groups>
    </map-panel-block>
    <div class="search-container">
      <div class="search-header" i18n>Search in map</div>
      <div class="search-content">
        <map-asset-search
          body
          [autocompleteFunction]="searchAutocomplete"
          [autocompleteResult]="searchAutocompleteResult$ | async"
          [centerMapOnPosition]="centerMapOnPosition"
          [selectAsset]="selectAsset"
        ></map-asset-search>
      </div>
    </div>
  </div>
  <div class="panel workflow-panel" *ngIf="activePanel[0] === 'workflows'">
    <h3 i18n>Workflows</h3>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Assets not sending ({{incidentsByTypeAndStatus.assetNotSending.unresolvedIncidents.length}})"
      [active]="activePanel[1] === 'ASSET_NOT_SENDING'"
      [setActiveFunction]="toggleLastInPanelTree(['workflows', 'ASSET_NOT_SENDING'])"
      [useArrowsAsToggle]="true"
    >
      <!-- <div header class="notifications" *ngIf="incidentNotificationsByType !== undefined && incidentNotificationsByType.assetNotSending !== undefined">
        <span class="created" *ngIf="countNotificationsOfType(incidentNotificationsByType.assetNotSending, 'created') > 0">
          {{countNotificationsOfType(incidentNotificationsByType.assetNotSending, 'created')}}
        </span>
        <span class="updated" *ngIf="countNotificationsOfType(incidentNotificationsByType.assetNotSending, 'updated') > 0">
          {{countNotificationsOfType(incidentNotificationsByType.assetNotSending, 'updated')}}
        </span>
      </div> -->
      <map-incidents-asset-not-sending
        body
        *ngIf="activePanel[1] === 'ASSET_NOT_SENDING'"
        [incidents]="incidentsByTypeAndStatus.assetNotSending"
        [selectedIncident]="selectedIncident"
        [selectIncident]="selectIncident"
        [showResolvedOnMap]="toggleLastInPanelTree(['workflows', 'ASSET_NOT_SENDING', 'RESOLVED'])"
      ></map-incidents-asset-not-sending>
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Manual position ({{incidentsByTypeAndStatus.manualPositionMode.unresolvedIncidents.length}})"
      [active]="activePanel[1] === 'MANUAL_MODE'"
      [setActiveFunction]="toggleLastInPanelTree(['workflows', 'MANUAL_MODE'])"
      [useArrowsAsToggle]="true"
    >
      <map-incidents-manual-position-mode
        body
        *ngIf="activePanel[1] === 'MANUAL_MODE'"
        [incidents]="incidentsByTypeAndStatus.manualPositionMode"
        [selectedIncident]="selectedIncident"
        [selectIncident]="selectIncident"
        [showResolvedOnMap]="toggleLastInPanelTree(['workflows', 'MANUAL_MODE', 'RESOLVED'])"
      ></map-incidents-manual-position-mode>
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Seasonal fishing ({{incidentsByTypeAndStatus.seasonalFishing.unresolvedIncidents.length}})"
      [active]="activePanel[1] === 'SEASONAL_FISHING'"
      [setActiveFunction]="toggleLastInPanelTree(['workflows', 'SEASONAL_FISHING'])"
      [useArrowsAsToggle]="true"
    >
      <map-incidents-seasonal-fishing
        body
        *ngIf="activePanel[1] === 'SEASONAL_FISHING'"
        [incidents]="incidentsByTypeAndStatus.seasonalFishing"
        [selectedIncident]="selectedIncident"
        [selectIncident]="selectIncident"
        [showResolvedOnMap]="toggleLastInPanelTree(['workflows', 'SEASONAL_FISHING', 'RESOLVED'])"
      ></map-incidents-seasonal-fishing>
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Parked ({{incidentsByTypeAndStatus.parked.unresolvedIncidents.length}})"
      [active]="activePanel[1] === 'PARKED'"
      [setActiveFunction]="toggleLastInPanelTree(['workflows', 'PARKED'])"
      [useArrowsAsToggle]="true"
    >
      <map-incidents-parked
        body
        *ngIf="activePanel[1] === 'PARKED'"
        [incidents]="incidentsByTypeAndStatus.parked"
        [selectedIncident]="selectedIncident"
        [selectIncident]="selectIncident"
        [showResolvedOnMap]="toggleLastInPanelTree(['workflows', 'PARKED', 'RESOLVED'])"
      ></map-incidents-parked>
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Ownership transfer ({{incidentsByTypeAndStatus.ownershipTransfer.unresolvedIncidents.length}})"
      [active]="activePanel[1] === 'OWNERSHIP_TRANSFER'"
      [setActiveFunction]="toggleLastInPanelTree(['workflows', 'OWNERSHIP_TRANSFER'])"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>
    <!-- <map-panel-block
      i18n-blockTitle
      blockTitle="Fishing Report"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>

    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="New Assets"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="AIS Assets"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Static VMS Assets"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Risk Assets"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="MMSI duplicates"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>
    <map-panel-block
      i18n-blockTitle
      blockTitle="Active Prior Notification"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block>-->
    <!-- <map-panel-block
      i18n-blockTitle
      blockTitle="Entry & Exit Assets"
      [active]="false"
      [setActiveFunction]="emptyClick"
      [useArrowsAsToggle]="true"
    >
    </map-panel-block> -->
  </div>
</div>
